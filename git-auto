#! /bin/sh

# set root directory
root=$(readlink -f $0 | xargs dirname)

# import common functions
source $root/common

# usage prints the command line usage instructions
usage() {
  log_info "usage: git auto <command>"
  log_info ""
  log_info "where available options for <command> are:"
  log_info "  feature  start, finish, or publish feature branch"
  log_info "  init     initialize repository to be compatible with git auto"
  log_info "  patch    start, finish, or publish patch on existing release"
  log_info "  test     run or show status of tests"
  log_info "  version  manually manage release versions"
  log_info ""
  log_info "for more command details run 'git auto <command> help'"
}

# validate subcommand
subcommand=$1
shift
case "$subcommand" in
  feature|init|patch|test|version)
    source $root/$subcommand ;;
  *)
    usage
    exit 1 ;;
esac

${subcommand}_main $@
